[원본 링크: 1:1 비디오 채팅 서비스는 E2E 회귀 테스트를 어떻게 자동화할까?](https://hyperconnect.github.io/2025/06/12/how-to-automate-e2e-test-on-1on1-video-chat-app.html)

※ **회귀 테스트(Regression Test):** 이전에 작동하던 소프트웨어 기능에 문제가 생기는 것ㅡ이를 ‘회귀 버그’라고 일컫는다ㅡ을 찾는 테스트 방식으로 새로운 업데이트로 기존 기능에 문제가 생겼는지 체크하는 것

아자르 앱의 1:1 비디오 채팅 서비스 자동화 사례를 소개한다. 기능을 Interaction 여부에 따라 구분했고, 이 중 Interaction 테스트를 중심으로 설명한다.

Interaction 테스트는 두 단말 간 동작을 맞춰야 하므로 각 테스트마다 필요한 플랫폼 조합((Android-Android, iOS-iOS, Android-iOS, iOS-Android)에 맞게 driver 쌍을 생성해 수행한다. 원리는 단순하지만 다음과 같은 문제가 있었다.

- **단말 유형과 매칭:** 특정 플랫폼 조합으로만 테스트해야 할 때가 있는데, 실제 서비스는 무작위 매칭이므로 원하는 조합이 생기지 않을 수 있다는 문제가 있었다.
- **실행 시간 증가:** 상호 의존적인 시나리오 특성상 상대 동작을 기다리게 되면서 케이스별 실행 시간이 늘어났다.

**해결 방법**

- **단말 유형과 매칭**

단순한 파라미터화는 모든 조합을 생성해 불필요한 테스트가 돌게 될 수 있다. 이를 해결하기 위해 pytest에 ‘platform-group’ 옵션을 추가해 원하는 그룹만 실행할 수 있도록 했고, ‘pytest_generate_tests’ hook에서 해당 그룹에 맞는 조합만 파라미터로 생성했다.

또한, 서버 개발팀의 지원으로 테스트 전용 segment 매칭 기능을 받아, 테스트 계정을 특정 segment에 배치해 원하는 플랫폼 조합을 구성했다.

- **실행 시간 최적화**

driver 간 독립적인 동작을 식별한 뒤 ‘ThreadPoolExecutor’를 활용한 병렬 실행 유틸리티를 fixture로 작성해 동시에 실행할 수 있도록 했다. 이를 통해 케이스당 1~2분을 절약하고 전체 회귀 테스트 소요 시간을 최대 6시간 줄였다.

- **Interface 기반 POM**

테스트 코드는 POM(Page Object Model)로 작성되었으며, 화면을 Page 객체로 추상화하고 인터페이스로 공통 동작을 정의했다. 테스트 코드는 이 인터페이스 타입만 사용하고, 객체 생성 시 driver를 주입하면 실제 플랫폼에 맞는 구현체가 동작한다.

결과적으로 수작업 QA보다 시간, 인력 효율을 크게 개선하면서 품질을 높일 수 있었고, 이는 DevOps 맥락에서 자동화 테스트의 강점을 보여주는 사례라 할 수 있다고 생각한다.