# 자동 활성화 규칙 (Auto-Activation Rules)

Claude가 특정 패턴을 감지하면 자동으로 적절한 에이전트나 모드를 활성화합니다.

---

## 키워드 기반 트리거

### 개발 관련
| 키워드 패턴 | 활성화 | 설명 |
|------------|--------|------|
| `구현해`, `만들어`, `작성해`, `추가해` | `/implement` 제안 | 기능 구현 시작 |
| `테스트`, `검증`, `확인해` | `testing-orchestrator` | 테스트 생성/실행 |
| `리뷰`, `검토`, `확인해줘` | `code-reviewer` | 코드 리뷰 |
| `디버그`, `버그`, `오류`, `에러` | `/debug` 제안 | 디버깅 세션 |

### 설계/계획 관련
| 키워드 패턴 | 활성화 | 설명 |
|------------|--------|------|
| `설계`, `아키텍처`, `구조` | `planner-orchestrator` | 설계 문서 생성 |
| `계획`, `플랜`, `어떻게` | `/plan` 제안 | 구현 계획 |
| `아이디어`, `방법`, `옵션` | `--brainstorm` 모드 | 브레인스토밍 |

### 품질 관련
| 키워드 패턴 | 활성화 | 설명 |
|------------|--------|------|
| `보안`, `취약점`, `인증`, `권한` | `security-reviewer` | 보안 리뷰 |
| `개선`, `최적화`, `리팩토링` | `/improve` 제안 | 코드 개선 |
| `정리`, `삭제`, `제거` | `/cleanup` 제안 | 데드 코드 제거 |

### 문서 관련
| 키워드 패턴 | 활성화 | 설명 |
|------------|--------|------|
| `문서`, `README`, `설명` | `doc-maintainer` | 문서 작성 |
| `설명해`, `알려줘`, `뭐야` | `/explain` 제안 | 코드 설명 |

### 연구/조사 관련
| 키워드 패턴 | 활성화 | 설명 |
|------------|--------|------|
| `조사`, `분석`, `비교`, `연구` | `research-orchestrator` | 심층 연구 |
| `찾아`, `검색`, `알아봐` | 웹 검색 | 정보 수집 |

### 워크플로우 관련
| 키워드 패턴 | 활성화 | 설명 |
|------------|--------|------|
| `반복`, `개선`, `사이클` | `pdca-iterator` | PDCA 사이클 |
| `갭`, `차이`, `불일치` | `gap-detector` | 갭 분석 |
| `진행상황`, `상태` | `/status` 제안 | 상태 확인 |

### 프론트엔드 관련
| 키워드 패턴 | 활성화 | 설명 |
|------------|--------|------|
| `클론`, `복제`, URL 패턴 | `frontend-orchestrator` | 웹사이트 클론 |
| `UI`, `화면`, `페이지` | 프론트엔드 컨텍스트 | 프론트엔드 작업 |

---

## 파일 타입 기반 트리거

| 파일 확장자 | 활성화 컨텍스트 |
|------------|----------------|
| `.py` | Python 환경, pytest |
| `.ts`, `.tsx` | TypeScript, Vitest/Jest |
| `.js`, `.jsx` | JavaScript, Vitest/Jest |
| `.go` | Go 환경 |
| `.rs` | Rust 환경 |
| `.md` | 문서 모드, doc-maintainer |
| `.json`, `.yaml` | 설정 파일 모드 |
| `Dockerfile`, `docker-compose.yml` | Docker 컨텍스트 |
| `.github/workflows/*` | CI/CD 컨텍스트 |

---

## 행동 모드 플래그

요청에 플래그가 포함되면 해당 모드 활성화:

| 플래그 | 모드 | 동작 |
|--------|------|------|
| `--brainstorm` | 브레인스토밍 | 다양한 옵션 탐색, 2-3개 제안 |
| `--introspect` | 메타인지 | 추론 과정 명시, 확신도 표시 |
| `--task-manage` | 태스크 관리 | 계층적 작업 분해 |
| `--orchestrate` | 오케스트레이션 | 다중 에이전트 조율 |
| `--uc` | 토큰 압축 | 간결한 응답 |
| `--deep-think` | 심층 사고 | 깊은 분석, 여러 관점 |

---

## 복합 트리거

### 보안 + 코드 변경
인증/권한 관련 파일 수정 시:
```
감지: src/auth/* 또는 security 키워드
→ 자동: security-reviewer 제안
→ 이후: code-reviewer
```

### 테스트 + 코드 변경
코드 수정 후:
```
감지: 기능 구현 완료
→ 자동: "테스트를 추가할까요?" 제안
→ 수락 시: testing-orchestrator
```

### 문서 + 코드 변경
공개 API 변경 시:
```
감지: 공개 함수/클래스 시그니처 변경
→ 자동: "문서 업데이트가 필요합니다" 알림
→ 수락 시: doc-maintainer
```

---

## 상태 기반 트리거

### PDCA 사이클 중
```
상태: pdca.active = true
→ 자동: 각 Phase 완료 시 다음 Phase 제안
→ Check Phase: gap-detector 자동 호출
→ 90% 미만: Act Phase 자동 진입
```

### 반복 구현 중
```
상태: iteration.current > 0
→ 자동: 이전 피드백 컨텍스트 로드
→ 완료 시: gap-detector로 검증
```

---

## 비활성화 규칙

다음 상황에서는 자동 활성화 억제:

| 상황 | 이유 |
|------|------|
| 사용자가 `--no-auto` 플래그 사용 | 명시적 비활성화 |
| 이미 해당 에이전트가 활성 | 중복 방지 |
| 간단한 질문 (< 10단어) | 과도한 개입 방지 |
| 정보 요청만 하는 경우 | 행동 불필요 |

---

## 우선순위

여러 트리거가 동시에 감지될 경우:

1. **보안** (최우선) - 취약점 관련은 항상 먼저
2. **명시적 플래그** - 사용자가 지정한 모드
3. **워크플로우 상태** - PDCA 등 진행 중인 워크플로우
4. **키워드 매칭** - 요청 내용 기반
5. **파일 타입** - 작업 대상 기반

---

## 제안 형식

자동 활성화 시 사용자에게 알림:

```markdown
💡 **제안**: `{에이전트/모드}`를 사용하시겠습니까?
- 감지된 패턴: {트리거 이유}
- 예상 동작: {간단한 설명}

[사용] [건너뛰기]
```

---

## 설정

`.claude/settings.json`에서 커스터마이즈:

```json
{
  "autoActivation": {
    "enabled": true,
    "showSuggestions": true,
    "autoAccept": false,
    "excludePatterns": ["*.test.*", "*.spec.*"],
    "customTriggers": {
      "myKeyword": "my-agent"
    }
  }
}
```
